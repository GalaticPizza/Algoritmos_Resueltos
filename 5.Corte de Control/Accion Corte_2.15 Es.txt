Accion Corte_2.15 Es

	AMBIENTE

	SECUNDARIO = REGISTRO
		CLAVE: REGISTRO
			ESCUELA: AN(30);
			AÑO: N(4);
			DIVISION: AN(2);
		FR;
		NOMBRE: AN(30);
		CANT_INASIST: N;
	FR;

	ARCH_SEC: Archivo de SECUNDARIO ordenado por CLAVE;
	REG_SEC: SECUNDARIO;

	RES_DIVI: AN(2);
	RES_AÑO:N(4);
	RE_ESC: AN(30);

	CONDICION: AN(20);

	CANT_DIAS,TOTDIVI,TOTAÑOL, TOTAÑOR, TOTAÑO,TOTESC, CONT_L,CONT_R, INASIST,TOTESCL: N;

	POR_INAST,POR_LIB,PRO_INAS: N(2,2);

	SUBACCION CORTE_DIVI ES

		ESCRIBIR(RES_DIVI);
		ESCRIBIR("Total de Alumnos:",TOTDIVI);
		TOTAÑO:= TOTAÑO + TOTDIVI;
		TOTAÑOL:= TOTAÑOL + TOT_L;
		TOTAÑOR:= TOTAÑOR + TOT_R;
		RES_DIVI:= REG_SEC.DIVISION;
		TOTDIVI:=0;
		TOT_L:= 0;
		TOT_R:=0;
	FSUB;

	SUBACCION CORTE_AÑO ES

		CORTE_DIVI;
		ESCRIBIR(RES_AÑO);
		ESCRIBIR("El total de alumnos libres es:", TOTAÑOL);
		ESCRIBIR("EL Total de alumnos regulares", TOTAÑOR);
		ESCRIBIR("EL Total de alumnos total:", TOTAÑO );
		TOTESC:= TOTESC + TOTAÑO;
		TOTESCL:= TOTESCL + TOTAÑOL;
		RES_AÑO.= REG_SEC.AÑO;
		TOTAÑO:= 0;
		TOTAÑOL:=0;
		TOTAÑOR:=0;
	FSUB;

	SUBACCION CORTE_ESC ES

		CORTE_AÑO;

		ESCRIBIR(RES_ESC);
		ESCRIBIR("La cantidad total de alumnos es:", TOTESC);
		POR_LIB:=  (TOTESCL * 100) / TOTESC;
		ESCRIBIR("El porcentaje de alumnos libres:",POR_LIB);
		PRO_INAS:= INASIST / TOTESC;
		INASIST:= 0;
		TOTESC:= 0;
		RES_ESC:= REG_SEC.ESCUELA;
	FSUB;
	
	PROCESO

	ABRIR (ARCH_SEC); LEER(ARCH_SEC, REG_SEC);

	RES_DIVI:= REG_SEC.DIVISION;

	REG_AÑO:= REG_SEC.AÑO;

	REG_ES:= REG_SEC.ESCUELA;

	ESCRIBIR("Ingrese cantidad de dias de clase");
	LEER(CANT_DIAS);

	CANT_DIAS:=0;TOTDIVI:=0;TOTAÑOL:=0; TOTAÑOR:=0; TOTAÑO:=0; TOTESC:=0; CONT_L:=0; CONT_R:=0; INASIST:=0;TOTESCL:=0;
	POR_INAST:=0;POR_LIB:=0;PRO_INAS:=0;
	
	ESCRIBIR("|Nombre|Porcent.Inasist|Situacion|")
	
	MIENTRAS NFDA(ARCH_SEC) HACER
		SI RES_ESC <> REG_SEC.ESCUELA ENTONCES
			CORTE_ESC;
		SINO
			SI RES_AÑI <> REG_SEG.AÑO ENTONCES
				CORTE_AÑO;Ç
			SINO
				SI RES_DIVI <> REG_SEC.DIVISION ENTONCES
						CORTE_DIVI;
				FS;
			FS;
		FS;
		TOTDIVI:= TOTDIVI + 1;
		INASIST:= INASIST + REG_SEC.CANT_INASIST;

		SI REG_SEC.CANT_INASIST > (CANT_DIAS * 0,2) ENTONCES
			CONT_L:= CONT_L + 1;
			CONDICION:= "LIBRE";
		SINO
			CONT_R:= CONT_R + 1;
			CONDICION:= "REGULAR";
		FS;
		POR_INASIST:= (REG_SEC.CANT_INASIST * 100)/ CANT_DIAS;

		ESCRIBIR(REG_SEC.NOMBRE, POR_INASIST"%",CONDICION);

		LEER(ARCH_SEC,REG_SEC);
	FM;
	
	CORTE_ESC;

	CERRAR(ARCH_SEC);

Fin_Accion.

























