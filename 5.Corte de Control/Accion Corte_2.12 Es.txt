Accion Corte_2.12 Es

	AMBIENTE

	PROVINCIA = REGISTRO
		DEPARTAMENTO: AN(30);
		CIUDAD: AN(30);
		CANT_HABIT: N;
	FR;

	SALIDA = REGISTRO
		DEPARTAMENTO: AN(30);
		CANT_HABIT: AN(30);
	FR;

	ARCH_PRO: Archivo de PROVINCIA ordenado por DEPARTAMENTO,CIUDAD;
	REG_DEP: PROVINCIA,

	ARCH_SAL: Archivo de SALIDA;
	REG_SAL: SALIDA;

	RES_DEP: AN(30);

	TOT_HABIT

	SUBACCION CORTE_DEP ES
		REG_SAL.DEPARTAMENTO:= RES_DEP;
		REG_SAL.CANT_HABIT:= TOT_HABIT;
		ESCRIBIR(ARCH_SAL; REG_SAL);
		TOT_HABIT:=0;
		RES_DEP:= REG_PRO.DEPARTAMENTO;
	FSUB;


	PROCESO

	ABRIR(ARCH_PRO); ABRIR S/(ARCH_SAL); LEER(ARCH_PRO,REG_PRO);
	TOT_HABIT:=0;
	RES_DEP:= REG_PRO.DEPARTAMENTO;
	MIENTRAS NFDA(ARCH_PRO) HACER
		SI RES_PRO <> REG_PRO.DEPARTAMENTO ENTONCES
			CORTE_DEP;
		FS;
		TOT_HABIT:= TOT_HABIT + REG_PRO.CANT_HABIT;
		LEER(ARCH_PRO, REG_PRO);
	FM;
	CERRAR(ARCH_PRO); CERRAR(ARCH_SAL);

Fin_Accion.


